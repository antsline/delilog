# delilog AI開発用プロンプトテンプレート集

## 1. 機能実装プロンプト

### 1.1 画面実装

```
delilogの要件定義書と開発計画書に基づいて、[画面名]を実装してください。

実装要件：
- Week [X], Day [Y]の仕様に従う
- TypeScriptで型安全に実装
- コーディング規約（delilog-coding-standards.md）に準拠
- デザインシステム（delilog-design-system.md）に従ったUI
- エラーハンドリングガイド（delilog-error-handling.md）に従った例外処理

使用技術：
- React Native (Expo SDK 50)
- NativeWind (Tailwind CSS)
- React Hook Form（フォームの場合）
- Zustand（状態管理が必要な場合）

含めるべき要素：
1. 完全なTypeScript型定義
2. 適切なバリデーション
3. ローディング状態の処理
4. エラー状態の処理
5. アクセシビリティ対応

ファイル構成：
- app/(tabs)/[画面名].tsx または app/(auth)/[画面名].tsx
- 必要に応じてコンポーネントを分割
```

### 1.2 コンポーネント実装

```
delilogの[コンポーネント名]コンポーネントを実装してください。

仕様：
[具体的な仕様を記載]

要件：
- 再利用可能な設計
- Props型定義を明確に
- デザインシステムのトークンを使用
- ストーリーブック用のサンプルコードも含める

実装場所：
- components/ui/[ComponentName].tsx（汎用UIの場合）
- components/features/[feature]/[ComponentName].tsx（機能固有の場合）

テストも含めてください：
- __tests__/components/[ComponentName].test.tsx
```

### 1.3 API連携実装

```
delilogのSupabase APIと連携する[機能名]を実装してください。

API仕様書（delilog-api-spec.md）の[セクション名]を参照して実装。

含めるべき内容：
1. 型定義（types/[feature].ts）
2. API関数（services/api/[feature].ts）
3. カスタムフック（hooks/use[Feature].ts）
4. エラーハンドリング
5. オフライン対応

追加要件：
- リトライ処理（最大3回）
- ローディング状態の管理
- キャッシュ戦略
- 楽観的更新（必要に応じて）
```

## 2. バグ修正プロンプト

### 2.1 一般的なバグ修正

```
以下のバグを修正してください：

エラー内容：
[エラーメッセージまたは問題の説明]

発生箇所：
- ファイル: [ファイルパス]
- 行数: [行数]（わかれば）

再現手順：
1. [手順1]
2. [手順2]
3. [手順3]

期待される動作：
[正しい動作の説明]

環境情報：
- Platform: [iOS/Android]
- Version: [OSバージョン]
- Device: [デバイス名]

修正時の注意点：
- 既存の機能を壊さないこと
- テストケースも更新すること
- エラーハンドリングガイドに従うこと
```

### 2.2 型エラーの修正

```
TypeScriptの型エラーを修正してください：

エラー内容：
```

[TypeScriptのエラーメッセージをペースト]

```

関連ファイル：
- [ファイル1]
- [ファイル2]

修正方針：
- 型安全性を保つ
- anyの使用は避ける
- 必要に応じて型ガードを実装
```

## 3. リファクタリングプロンプト

### 3.1 パフォーマンス改善

```
[ファイル名/機能名]のパフォーマンスを改善してください。

現在の問題：
- [問題点1]
- [問題点2]

計測結果：
- 現在の処理時間: [Xms]
- 目標: [Yms以下]

改善のポイント：
1. 不要な再レンダリングの削除
2. メモ化の適用（useMemo, useCallback）
3. 仮想化の実装（大量データの場合）
4. 遅延読み込みの実装

制約：
- 機能の互換性を保つ
- UIの見た目を変えない
```

### 3.2 コード品質改善

```
[ファイル名]のコードをリファクタリングしてください。

改善点：
1. 関数の分割（単一責任の原則）
2. 重複コードの除去
3. 命名の改善
4. コメントの追加（複雑な部分のみ）
5. 型定義の強化

コーディング規約（delilog-coding-standards.md）に完全準拠すること。

現在のコード：
[既存のコードをペースト]
```

## 4. テスト作成プロンプト

### 4.1 ユニットテスト

```
[関数名/コンポーネント名]のユニットテストを作成してください。

テスト対象：
- ファイル: [ファイルパス]
- 関数/コンポーネント: [名前]

テストケース：
1. 正常系
   - [ケース1]
   - [ケース2]
2. 異常系
   - [エラーケース1]
   - [エラーケース2]
3. エッジケース
   - [境界値など]

使用ライブラリ：
- Jest
- React Native Testing Library
- MSW（API モックが必要な場合）

カバレッジ目標: 90%以上
```

### 4.2 統合テスト

```
[機能名]の統合テストを作成してください。

テストシナリオ：
1. [ユーザーストーリー1]
2. [ユーザーストーリー2]

含めるべきテスト：
- API連携の確認
- 状態管理の動作確認
- エラーケースの処理
- オフライン時の動作

モックの設定：
- Supabase APIのモック
- AsyncStorageのモック
- NetInfoのモック（必要に応じて）
```

## 5. ドキュメント生成プロンプト

### 5.1 README作成

```
[機能/モジュール名]のREADMEを作成してください。

含めるべき内容：
1. 概要
2. 使用方法
3. API リファレンス
4. 設定オプション
5. サンプルコード
6. トラブルシューティング

フォーマット：
- Markdown形式
- コードブロックにはシンタックスハイライト
- 実行可能なサンプルコード
```

### 5.2 JSDoc/TSDoc作成

````
[ファイル名]の関数にJSDoc/TSDocコメントを追加してください。

要件：
- すべての公開関数/メソッドにコメント
- パラメータの説明
- 戻り値の説明
- 使用例の追加
- 例外の説明（throwする場合）

例：
```typescript
/**
 * 点呼記録を保存する
 * @param record - 保存する点呼記録データ
 * @returns 保存された記録（IDを含む）
 * @throws {ValidationError} 入力データが不正な場合
 * @example
 * const saved = await saveTenkoRecord({ type: 'before', ... });
 */
````

```

## 6. 新機能提案プロンプト

### 6.1 機能設計
```

delilogに[新機能名]を追加する設計を提案してください。

背景：
[なぜこの機能が必要か]

要件：

- [要件1]
- [要件2]

提案に含めるべき内容：

1. 機能概要
2. UIワイヤーフレーム（ASCII artで）
3. データモデル
4. API設計
5. 実装の優先順位
6. 影響を受ける既存機能

制約：

- 既存の設計思想に合わせる
- モバイルファーストで設計
- オフライン対応を考慮

```

## 7. デバッグ支援プロンプト

### 7.1 エラー調査
```

以下のエラーの原因を調査し、解決策を提案してください：

エラーログ：

```
[スタックトレースをペースト]
```

発生状況：

- 操作: [どんな操作をしたか]
- 頻度: [常に/時々/特定条件で]
- 環境: [開発/本番]

調査済みの内容：

- [確認したこと1]
- [確認したこと2]

関連コード：
[疑わしい部分のコードをペースト]

```

### 7.2 パフォーマンス問題調査
```

[画面/機能名]のパフォーマンス問題を調査してください。

症状：

- [遅い/カクつく/フリーズするなど]

計測結果：

- React DevTools Profilerの結果: [結果]
- レンダリング回数: [回数]

疑わしい箇所：

- [コンポーネント/関数名]

改善案を提案してください。

```

## 8. セキュリティ対策プロンプト

### 8.1 セキュリティ監査
```

[機能/ファイル名]のセキュリティ監査を実施してください。

チェック項目：

1. 認証・認可の適切性
2. 入力値検証
3. SQLインジェクション対策
4. XSS対策
5. 機密情報の取り扱い
6. 安全な通信

現在の実装：
[コードをペースト]

改善提案をお願いします。

```

## 9. 使用上の注意

### プロンプト使用時のベストプラクティス

1. **コンテキストを明確に**
   - 関連するドキュメント名を明記
   - 具体的なファイルパスを含める

2. **段階的な実装**
   - 大きな機能は小さく分割してプロンプトを作成
   - 各段階で動作確認できるように

3. **テストファースト**
   - 実装前にテストケースを明確に
   - TDDアプローチを推奨

4. **ドキュメント同期**
   - コード変更時は関連ドキュメントの更新も依頼
   - 特にAPI変更時は仕様書の更新必須

5. **レビュー指針**
   - 生成されたコードは必ずレビュー
   - 特にセキュリティとパフォーマンスに注意
```
